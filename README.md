# README

# CurConv - Currency Converter API

CurConv is a simple currency converter API developed with Ruby on Rails (RoR) for user registration, authentication, and currency conversion transactions. The transactions (conversions) can be reached through the following endpoint: `GET /transactions?user_id=123`. It has a basic authentication just to associate the conversions to the users. I decided to keep code that is not necessary for now (e.g., code generated by the RoR scaffolding).

## Architectural Decisions
 - Framework: the project uses the Ruby on Rails (RoR) framework, following the Model-View-Controller (MVC) pattern.
 - Authentication: basic session-based authentication is used to associate transactions with users.
 - Testing and documentation: RSpec and Rswag are used for unit, integration, and API documentation/testing.
 - External Service: currency conversion rates are fetched from currencyapi.com.

## Data Organization (MVC)
 - Models: represent the core data objects such as User and Transaction. Models handle business logic and validation.
 - Controllers: handle HTTP requests, process input, interact with models, and return responses (e.g., JSON/HTML). Key controllers include UsersController, SessionsController, and TransactionsController.
 - Views: since this is a basic project, views are minimal and mostly respond with JSON. Swagger (via Rswag) provides interactive API documentation.
 - Database: stores users and their transactions (conversions), associating each transaction with a user. This project uses SQLite for simplicity.

## General features

- User registration and login
- Currency conversion using [currencyapi.com](https://currencyapi.com/)
- Transaction history per user
- Rswag-powered OpenAPI/Swagger documentation
- RSpec unit and integration basic tests

## Requirements

- Ruby (see `.ruby-version`)
- SQLite (for this version)
- Bundler

## Setup

1. **Clone this repository:**
   ```sh
   git clone https://github.com/cezane/curconv.git
   cd curconv
   ```

2. **Install dependencies:**
   ```sh
   gem install bundler
   bundle install
   ```

3. **Set up the database:**
   ```sh
   rails db:setup
   ```

4. **Set your Currency API key:**
   - Get a free API key from [currencyapi.com](https://currencyapi.com/).
   - Add it to your environment:
     ```sh
     export CURRENCY_API_KEY=your_api_key_here
     ```
   - Or add it to `config/credentials.yml.enc` under `currencyapi.key`.

5. **Run the server:**
   ```sh
   rails server
   ```

6. **Run tests:**
   ```sh
   bundle exec rspec
   ```

## API Documentation

- After starting the server, visit `/api-docs` for interactive Swagger docs (if enabled with Rswag).

## CI/CD

- GitHub Actions workflow runs tests and linting on every push and pull request.
- Deployment is triggered on push to `main` via Render deploy hook.

## Project Structure

- `app/controllers/` - API controllers
- `spec/integration/` - Rswag API specs (Swagger) and integration tests
- `spec/units/` - RSpec unit tests
- `.github/workflows/ci.yml` - CI pipeline

## Notes

- For API requests, use `Content-Type: application/json`.
- All endpoints expect and return JSON.
- To run locally, ensure you have a valid `CURRENCY_API_KEY`.

---
