# README

# CurConv - Currency Converter API

This a Ruby on Rails basic application for user registration, authentication, and currency conversion transactions. The transactions (conversions) can be reached through the following endpoint: `GET /transactions?user_id=123`. It has a basic authentication just to associate the conversions to the users. I decided to keep code that is not necessary for now (e.g., code generated by the RoR scaffolding).

## General features

- User registration and login
- Currency conversion using [currencyapi.com](https://currencyapi.com/)
- Transaction history per user
- Rswag-powered OpenAPI/Swagger documentation
- RSpec unit and integration basic tests

## Requirements

- Ruby (see `.ruby-version`)
- SQLite (for this version)
- Bundler

## Setup

1. **Clone this repository:**
   ```sh
   git clone https://github.com/cezane/curconv.git
   cd curconv
   ```

2. **Install dependencies:**
   ```sh
   gem install bundler
   bundle install
   ```

3. **Set up the database:**
   ```sh
   rails db:setup
   ```

4. **Set your Currency API key:**
   - Get a free API key from [currencyapi.com](https://currencyapi.com/).
   - Add it to your environment:
     ```sh
     export CURRENCY_API_KEY=your_api_key_here
     ```
   - Or add it to `config/credentials.yml.enc` under `currencyapi.key`.

5. **Run the server:**
   ```sh
   rails server
   ```

6. **Run tests:**
   ```sh
   bundle exec rspec
   ```

## API Documentation

- After starting the server, visit `/api-docs` for interactive Swagger docs (if enabled with Rswag).

## CI/CD

- GitHub Actions workflow runs tests and linting on every push and pull request.
- Deployment is triggered on push to `main` via Render deploy hook.

## Project Structure

- `app/controllers/` - API controllers
- `spec/integration/` - Rswag API specs (Swagger) and integration tests
- `spec/units/` - RSpec unit tests
- `.github/workflows/ci.yml` - CI pipeline

## Notes

- For API requests, use `Content-Type: application/json`.
- All endpoints expect and return JSON.
- To run locally, ensure you have a valid `CURRENCY_API_KEY`.

---
